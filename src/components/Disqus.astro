---
export interface Props {
	permalink: string;
}

const { permalink } = Astro.props;
---

<div class="layout">
	<article class="ff9-dialog" id="disqus-comments" data-url={permalink}>
		<h2 class="comments-header">Comments</h2>
		<div id="disqus_thread"></div>
	</article>
</div>
<style>
	.layout {
		content: contain;
		margin: 16px auto;
		max-width: var(--main-content-width);
		width: 100%;
	}

	.comments-header {
		font-family: inherit;
		font-size: 27px;
		font-weight: inherit;
		line-height: inherit;
		margin-top: 1rem;
	}

	#disqus_thread {
		background: transparent;
		background-clip: padding-box;
		color: white;
		margin-bottom: 1rem;
		min-height: 37.5rem;
		padding: 1rem;
		position: relative;
	}
</style>
<script is:inline>
	var disqus_config = function () {
		const thread = document.getElementById('disqus-comments').dataset;
		this.page.url = thread.url;
		this.page.identifier = thread.identifier;
	};
	!function () {
		const s = document.createElement('script');
		s.src = 'https://merri-net.disqus.com/embed.js';
		s.async = 1
		s.setAttribute('data-timestamp', +new Date());
		document.head.appendChild(s);
	}()
</script>
